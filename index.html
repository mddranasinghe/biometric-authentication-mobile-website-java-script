<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biometric Authentication</title>
</head>
<body>

<h1>Biometric Authentication</h1>

<button id="authButton">Authenticate with Biometrics</button>

<script>
// Function to generate a random challenge for WebAuthn credential creation
function generateRandomChallenge() {
    const randomBytes = new Uint8Array(32); // 32 bytes (256 bits) for a standard challenge
    window.crypto.getRandomValues(randomBytes);
    return randomBytes;
}

document.getElementById("authButton").addEventListener("click", function() {
    // Check if the browser supports WebAuthn
    if (window.PublicKeyCredential) {
        // WebAuthn is supported, proceed with creating credentials
        const options = {
            publicKey: {
                challenge: generateRandomChallenge(),
                pubKeyCredParams: [
                    { type: "public-key", alg: -7 }, // ES256 algorithm
                    { type: "public-key", alg: -257 } // RS256 algorithm
                    // You can add more algorithms as needed
                ]
                // Other properties for credential creation...
            }
        };

        // Call navigator.credentials.create() to create the credential
        navigator.credentials.create(options)
            .then((credential) => {
                // Credential creation successful, redirect to home page
                window.location.href = "home.html";
            })
            .catch((error) => {
                // An error occurred during credential creation or user canceled
                console.error("Biometric authentication failed:", error);
                alert("Biometric authentication failed. Please try again.");
            });
    } else {
        // WebAuthn is not supported, inform the user
        alert("Biometric authentication is not supported in this browser.");
    }
});
</script>

</body>
</html>
